# 发票识别助手

一款面向财务/行政人员的本地桌面工具，实现发票OCR自动识别、多系统自动登录与填写、本地发票台账管理等功能。

## 功能特点

- 🎯 **智能识别**：采用GLM-OCR本地引擎，准确识别各类发票信息
- 🤖 **自动填写**：支持ERP、报销、税务等多系统自动登录和填写
- 💾 **本地管理**：SQLite本地数据库，发票信息安全存储
- 🔒 **安全加密**：AES-256-GCM加密存储系统凭据
- 📦 **轻量部署**：打包为单个可执行文件，无需安装额外环境

## 系统要求

- Windows 10/11 (64位)
- 内存：≥ 8GB (推荐 16GB)
- 硬盘：≥ 500MB 可用空间

## 快速开始

### 开发环境

1. 克隆项目
```bash
git clone https://github.com/your-org/fapaio-invoice-assistant.git
cd fapaio-invoice-assistant
```

2. 安装依赖
```bash
npm install
```

3. 开发运行
```bash
npm run dev
```

### 生产打包

1. 打包应用
```bash
npm run dist:win
```

2. 生成便携版
```bash
npm run dist:portable
```

## 使用指南

### 1. 扫描发票

- 点击"扫描发票"按钮或使用快捷键 `Ctrl+O`
- 拖拽或点击上传发票图片（支持JPG、PNG、PDF）
- 系统自动识别并展示结果
- 确认信息后保存到本地台账

### 2. 自动填写

1. 在发票列表中选择需要填写的发票
2. 点击"自动填写"按钮
3. 选择目标系统（ERP/报销/税务）
4. 系统自动登录并填写发票信息
5. 支持批量处理多张发票

### 3. 系统设置

- **OCR设置**：配置API密钥（用于测试）等
- **系统凭据**：管理各系统登录账号密码
- 所有敏感信息均加密存储

### 4. 操作日志

- 查看所有操作记录
- 支持筛选和导出
- 失败操作可查看截图

## 技术架构

```
┌─────────────────────────────────────────────────────────┐
│                    Electron 桌面壳                        │
│  ┌───────────────┐  ┌────────────────┐  ┌─────────────┐ │
│  │  Vue 3 前端    │  │  Node 主进程    │  │ 本地 SQLite │ │
│  │  (Renderer)   │  │  (Main)        │  │   数据库     │ │
│  └───────┬───────┘  └───────┬────────┘  └──────┬──────┘ │
│          │ IPC              │                   │        │
│          ▼                  ▼                   ▼        │
│  ┌───────────────┐  ┌────────────────┐         │        │
│  │  发票预览/编辑 │  │ Playwright     │         │        │
│  │  台账/状态面板 │  │ 无头浏览器引擎  │         │        │
│  └───────────────┘  │ (自动登录/填写) │         │        │
│                     └───────┬────────┘         │        │
│                             │                   │        │
│                     ┌───────▼────────┐         │        │
│                     │  GLM-OCR 本地   │         │        │
│                     │  （专用OCR模型） │◄────────┘        │
│                     └────────────────┘                   │
└─────────────────────────────────────────────────────────┘
```

## 项目结构

```
src/
├── main/                 # Electron 主进程
│   ├── index.ts         # 入口文件
│   ├── ipc/             # IPC 通信处理
│   ├── ocr/             # OCR 识别模块
│   ├── automation/      # 自动化模块
│   ├── db/              # 数据库操作
│   └── utils/           # 工具函数
├── renderer/            # Vue 前端
│   ├── views/           # 页面组件
│   ├── components/      # 通用组件
│   ├── stores/          # 状态管理
│   └── router/          # 路由配置
├── shared/              # 共享类型定义
└── resources/           # 静态资源
```

## 开发说明

### 技术栈

- **桌面框架**：Electron 28+
- **前端框架**：Vue 3 + Vite + TypeScript
- **UI组件**：Element Plus
- **状态管理**：Pinia
- **OCR引擎**：GLM-OCR
- **自动化**：Playwright
- **数据库**：better-sqlite3
- **构建工具**：electron-builder

### 代码规范

- 使用 TypeScript 严格模式
- 遵循 ESLint + Prettier 规范
- 所有函数必须有 JSDoc 注释
- 组件和函数使用驼峰命名

### Git 工作流

```bash
# 功能开发
git checkout -b feature/xxx
git commit -m "feat: 添加新功能"

# 修复问题
git checkout -b fix/xxx
git commit -m "fix: 修复问题"

# 提交规范
feat: 新功能
fix: 修复
docs: 文档
style: 格式
refactor: 重构
test: 测试
chore: 构建
```

## 常见问题

### Q: OCR识别不准确怎么办？

A:
1. 确保图片清晰，避免反光和模糊
2. 尝试切换到PaddleOCR引擎
3. 手动编辑识别结果后保存

### Q: 自动填写失败怎么办？

A:
1. 检查系统凭据是否正确
2. 查看操作日志了解具体错误
3. 系统界面变更可能需要更新选择器

### Q: 如何备份数据？

A:
应用数据存储在用户目录下的AppData文件夹中，可直接备份整个文件夹。

## 更新日志

### v1.0.0 (2024-02-20)
- ✨ 初始版本发布
- 🎯 支持发票OCR识别
- 🤖 支持多系统自动填写
- 💾 实现本地台账管理

## 贡献指南

欢迎提交 Issue 和 Pull Request！

1. Fork 项目
2. 创建功能分支
3. 提交更改
4. 发起 Pull Request

## 许可证

MIT License

## 联系我们

- 邮箱：support@fapaio.com
- 问题反馈：[GitHub Issues](https://github.com/your-org/fapaio-invoice-assistant/issues)

---

**发票识别助手** - 让发票处理更高效！
